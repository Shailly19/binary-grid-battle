(()=>{"use strict";const e=(e,t)=>({getName:()=>e,getMarker:()=>t}),t=(()=>{let t=null,r=null;const l=e("Player 1","X"),n=e("Player 2","O"),o=e("Computer","O"),a=document.getElementById("player01");a.addEventListener("click",(()=>{null===t?t=l:null!==t&&(r=l),a.classList.add("active1"),s.disabled=!1,c.disabled=!1}));const s=document.getElementById("player02");s.disabled=!0,s.addEventListener("click",(()=>{null===t?t=n:null!==t&&(r=n),s.classList.add("active2"),c.disabled=!1}));const c=document.getElementById("computer02");return c.disabled=!0,c.addEventListener("click",(()=>{null===t?t=o:null!==t&&(r=o),c.classList.add("active2"),s.disabled=!1})),{getCurrentPlayer:()=>t,getToswitchPlayer:()=>r,switchPlayer:()=>{const e=t;t=r,r=e},resetCurrentPlayer:()=>{t=null,r=null}}})(),r=(()=>{let e=[["","",""],["","",""],["","",""]];const t=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];return{renderBoard:()=>e,updateBoard:(t,r,l)=>t>=0&&t<3&&r>=0&&r<3&&""===e[t][r]&&(e[t][r]=l,!0),checkWin:r=>{for(const l of t){const[t,n,o]=l;if(e[t[0]][t[1]]===r&&e[n[0]][n[1]]===r&&e[o[0]][o[1]]===r)return!0}return!1},checkTie:()=>{for(let t=0;t<3;t++)for(let r=0;r<3;r++)if(""===e[t][r])return!1;return!0},resetBoard:()=>{e=[["","",""],["","",""],["","",""]]}}})(),l=r,n=(()=>{let e=!1;const r=document.querySelector("#text"),n=document.querySelector(".board").querySelectorAll(".box"),o=(n,o)=>{if(e)return;const s=Math.floor(o/3),c=o%3,d=t.getCurrentPlayer();"X"===d.getMarker()?n.classList.add("marker-text-x"):"O"===d.getMarker()&&n.classList.add("marker-text-o"),t.getToswitchPlayer(),l.updateBoard(s,c,d.getMarker())?(n.textContent=d.getMarker(),l.checkWin(d.getMarker())?(console.log(d.getName()+" is the winner"),r.textContent=d.getName()+" wins!",e=!0):l.checkTie()?(r.textContent="It's a tie!",console.log("It's a tie"),e=!0):(t.switchPlayer(),t.getCurrentPlayer().getName().includes("Computer")&&a())):console.log("Invalid move. Try again.")},a=()=>{const e=s(),t=Math.floor(Math.random()*e.length),[r,l]=e[t];setTimeout((()=>{const e=3*r+l;o(n[e],e)}),500)},s=()=>{const e=[];for(let t=0;t<3;t++)for(let r=0;r<3;r++)""===l.renderBoard()[t][r]&&e.push([t,r]);return e},c=e=>{const t=e.target,r=Array.from(n).indexOf(t);o(t,r)};return{playgame:()=>{n.forEach((e=>{e.addEventListener("click",c)}))},resetgame:()=>{l.resetBoard(),n.forEach((e=>{e.textContent="",e.classList.remove("marker-text-x"),e.classList.remove("marker-text-o"),e.removeEventListener("click",c)})),t.resetCurrentPlayer();const r=document.querySelectorAll(".select"),o=document.querySelector(".board"),a=document.querySelector("#reset"),s=document.querySelector("#text"),d=document.querySelector(".play-btn"),i=document.querySelector("#startgame");i&&(o.style.display="none",a.style.display="none",s.textContent="",i.style.display="block",d.style.display="block"),r.forEach((e=>{e.disabled=!1,e.classList.remove("active1"),e.classList.remove("active2")})),e=!1}}})(),o=n,a=document.querySelector(".play-btn"),s=document.querySelector("#startgame"),c=document.querySelector("#reset"),d=document.querySelector(".board"),i=document.querySelector("#text"),u=document.querySelector(".selection-pane");a.addEventListener("click",(()=>{u&&(u.style.display="grid",a.style.display="none")})),s.addEventListener("click",(()=>{d&&i&&(o.playgame(),a.style.display="none",c.style.display="block",d.style.display="grid",i.style.display="block",s.style.display="none",u.style.display="none")})),c.addEventListener("click",o.resetgame)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLFFBQVUsT0FDdEJKLEVBQVNHLE1BQU1DLFFBQVUsT0FDekJ2QyxFQUFXVSxZQUFjLEdBQ3pCMkIsRUFBU0MsTUFBTUMsUUFBVSxRQUN6QkgsRUFBUUUsTUFBTUMsUUFBVSxTQUc1QkwsRUFBY0osU0FBU1UsSUFDbkJBLEVBQUkvRCxVQUFXLEVBQ2YrRCxFQUFJbEUsVUFBVTBELE9BQU8sV0FDckJRLEVBQUlsRSxVQUFVMEQsT0FBTyxVQUFVLElBR25DakMsR0FBVyxDQUFLLEVBT3ZCLEVBeElnQixHQTBJakIsSUMzSU1xQyxFQUFVakUsU0FBUzhCLGNBQWMsYUFDakNvQyxFQUFXbEUsU0FBUzhCLGNBQWMsY0FDbENrQyxFQUFXaEUsU0FBUzhCLGNBQWMsVUFDbENoQixFQUFRZCxTQUFTOEIsY0FBYyxVQUMvQkQsRUFBYTdCLFNBQVM4QixjQUFjLFNBQ3BDd0MsRUFBWXRFLFNBQVM4QixjQUFjLG1CQUV6Q21DLEVBQVEvRCxpQkFBaUIsU0FBUyxLQUMxQm9FLElBQ0FBLEVBQVVILE1BQU1DLFFBQVUsT0FDMUJILEVBQVFFLE1BQU1DLFFBQVUsT0FDNUIsSUFHSkYsRUFBU2hFLGlCQUFpQixTQUFTLEtBQzNCWSxHQUFTZSxJQUNULEVBQVM2QixXQUNUTyxFQUFRRSxNQUFNQyxRQUFVLE9BQ3hCSixFQUFTRyxNQUFNQyxRQUFVLFFBQ3pCdEQsRUFBTXFELE1BQU1DLFFBQVUsT0FDdEJ2QyxFQUFXc0MsTUFBTUMsUUFBVSxRQUMzQkYsRUFBU0MsTUFBTUMsUUFBVSxPQUN6QkUsRUFBVUgsTUFBTUMsUUFBVSxPQUM5QixJQUdKSixFQUFTOUQsaUJBQWlCLFFBQVMsRUFBUzBELFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aWMtdGFjLXRvZS8uL3NyYy9tb2R1bGVzL3BsYXllci5qcyIsIndlYnBhY2s6Ly90aWMtdGFjLXRvZS8uL3NyYy9tb2R1bGVzL2dhbWVwbGF5LmpzIiwid2VicGFjazovL3RpYy10YWMtdG9lLy4vc3JjL21vZHVsZXMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RpYy10YWMtdG9lLy4vc3JjL21vZHVsZXMvZ2FtZWZsb3cuanMiLCJ3ZWJwYWNrOi8vdGljLXRhYy10b2UvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY3JlYXRlUGxheWVyID0gKG5hbWUsIG1hcmtlcikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldE5hbWU6ICgpID0+IG5hbWUsXG4gICAgICAgIGdldE1hcmtlcjogKCkgPT4gbWFya2VyLFxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVQbGF5ZXI7XG4iLCJpbXBvcnQgY3JlYXRlUGxheWVyIGZyb20gJy4vcGxheWVyJztcblxuY29uc3QgZ2FtZXBsYXkgPSAoKCkgPT4ge1xuICAgIFxuICAgIGxldCBjdXJyZW50UGxheWVyID0gbnVsbDtcbiAgICBsZXQgdG9zd2l0Y2hQbGF5ZXIgPSBudWxsO1xuICBcbiAgICBjb25zdCBwbGF5ZXIxID0gY3JlYXRlUGxheWVyKFwiUGxheWVyIDFcIiwgXCJYXCIpO1xuICAgIGNvbnN0IHBsYXllcjIgPSBjcmVhdGVQbGF5ZXIoXCJQbGF5ZXIgMlwiLCBcIk9cIik7XG4gIFxuICAgIGNvbnN0IGNvbXB1dGVyMiA9IGNyZWF0ZVBsYXllcihcIkNvbXB1dGVyXCIsIFwiT1wiKTtcbiAgXG4gICAgY29uc3QgcDFlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXIwMVwiKTtcbiAgICAgICAgcDFlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyID09PSBudWxsKSB7XG4gICAgICAgICAgICBjdXJyZW50UGxheWVyID0gcGxheWVyMTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGxheWVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0b3N3aXRjaFBsYXllciA9IHBsYXllcjE7XG4gICAgICAgIH1cbiAgICAgICAgcDFlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUxXCIpO1xuICAgICAgICBwMmVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgYzJlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IHAyZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyMDJcIik7XG4gICAgICAgIHAyZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHAyZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFBsYXllciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY3VycmVudFBsYXllciA9IHBsYXllcjI7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBsYXllciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdG9zd2l0Y2hQbGF5ZXIgPSBwbGF5ZXIyO1xuICAgICAgICB9XG4gICAgICAgIHAyZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlMlwiKTtcbiAgICAgICAgYzJlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IGMyZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcHV0ZXIwMlwiKTtcbiAgICAgICAgYzJlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgYzJlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50UGxheWVyID09PSBudWxsKSB7XG4gICAgICAgICAgICBjdXJyZW50UGxheWVyID0gY29tcHV0ZXIyO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQbGF5ZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRvc3dpdGNoUGxheWVyID0gY29tcHV0ZXIyO1xuICAgICAgICB9XG4gICAgICAgIGMyZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlMlwiKTtcbiAgICAgICAgcDJlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IGdldEN1cnJlbnRQbGF5ZXIgPSAoKSA9PiBjdXJyZW50UGxheWVyO1xuICBcbiAgICBjb25zdCBnZXRUb3N3aXRjaFBsYXllciA9ICgpID0+IHRvc3dpdGNoUGxheWVyO1xuXG4gICAgY29uc3Qgc3dpdGNoUGxheWVyID0gKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHRlbXBQbGF5ZXIgPSBjdXJyZW50UGxheWVyO1xuICAgICAgICBjdXJyZW50UGxheWVyID0gdG9zd2l0Y2hQbGF5ZXI7XG4gICAgICAgIHRvc3dpdGNoUGxheWVyID0gdGVtcFBsYXllcjtcblxuICAgIH07XG4gIFxuICAgIGNvbnN0IHJlc2V0Q3VycmVudFBsYXllciA9ICgpID0+IHtcblxuICAgICAgICBjdXJyZW50UGxheWVyID0gbnVsbDtcbiAgICAgICAgdG9zd2l0Y2hQbGF5ZXIgPSBudWxsO1xuXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldEN1cnJlbnRQbGF5ZXIsXG4gICAgICAgIGdldFRvc3dpdGNoUGxheWVyLFxuICAgICAgICBzd2l0Y2hQbGF5ZXIsXG4gICAgICAgIHJlc2V0Q3VycmVudFBsYXllcixcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZXBsYXk7XG4iLCJjb25zdCBnYW1lQm9hcmQgPSAoKCkgPT4ge1xuICAgIFxuICAgIGxldCBib2FyZCA9IFtcbiAgICAgICAgW1wiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIFtcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICBdO1xuICBcbiAgICBjb25zdCByZW5kZXJCb2FyZCA9ICgpID0+IGJvYXJkO1xuICBcbiAgICBjb25zdCB1cGRhdGVCb2FyZCA9IChpLCBqLCBtYXJrZXIpID0+IHtcbiAgICAgICAgaWYgKGkgPj0gMCAmJiBpIDwgMyAmJiBqID49IDAgJiYgaiA8IDMgJiYgYm9hcmRbaV1bal0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGJvYXJkW2ldW2pdID0gbWFya2VyO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gIFxuICAgIGNvbnN0IHdpbm5pbmdDb21iaW5hdGlvbnMgPSBbXG5cbiAgICAgICAgW1swLCAwXSwgWzAsIDFdLCBbMCwgMl1dLFxuICAgICAgICBbWzEsIDBdLCBbMSwgMV0sIFsxLCAyXV0sXG4gICAgICAgIFtbMiwgMF0sIFsyLCAxXSwgWzIsIDJdXSxcbiAgICAgICAgW1swLCAwXSwgWzEsIDBdLCBbMiwgMF1dLFxuICAgICAgICBbWzAsIDFdLCBbMSwgMV0sIFsyLCAxXV0sXG4gICAgICAgIFtbMCwgMl0sIFsxLCAyXSwgWzIsIDJdXSxcbiAgICAgICAgW1swLCAwXSwgWzEsIDFdLCBbMiwgMl1dLFxuICAgICAgICBbWzAsIDJdLCBbMSwgMV0sIFsyLCAwXV0sXG5cbiAgICBdO1xuICBcbiAgICBjb25zdCBjaGVja1dpbiA9IChtYXJrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBjb21iaW5hdGlvbiBvZiB3aW5uaW5nQ29tYmluYXRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBbYSwgYiwgY10gPSBjb21iaW5hdGlvbjtcbiAgICAgICAgICAgIGlmKFxuICAgICAgICAgICAgICAgIGJvYXJkW2FbMF1dW2FbMV1dID09PSBtYXJrZXIgJiZcbiAgICAgICAgICAgICAgICBib2FyZFtiWzBdXVtiWzFdXSA9PT0gbWFya2VyICYmXG4gICAgICAgICAgICAgICAgYm9hcmRbY1swXV1bY1sxXV0gPT09IG1hcmtlclxuICAgICAgICAgICAgKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICBcbiAgICBjb25zdCBjaGVja1RpZSA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJvYXJkW2ldW2pdID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgXG4gICAgY29uc3QgcmVzZXRCb2FyZCA9ICgpID0+IHtcbiAgICAgICAgYm9hcmQgPSBbXG4gICAgICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgIF07XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlckJvYXJkLFxuICAgICAgICB1cGRhdGVCb2FyZCxcbiAgICAgICAgY2hlY2tXaW4sXG4gICAgICAgIGNoZWNrVGllLFxuICAgICAgICByZXNldEJvYXJkLFxuICAgIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lQm9hcmQ7XG4iLCJpbXBvcnQgZ2FtZXBsYXkgZnJvbSAnLi9nYW1lcGxheSc7XG5pbXBvcnQgZ2FtZUJvYXJkIGZyb20gJy4vZ2FtZWJvYXJkJztcblxuY29uc3QgZ2FtZWZsb3cgPSAoKCkgPT4ge1xuICAgIFxuICAgIGxldCBnYW1lb3ZlciA9IGZhbHNlO1xuICBcbiAgICBjb25zdCByZXN1bHRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZXh0XCIpO1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib2FyZFwiKTtcbiAgICBjb25zdCBib3hlcyA9IGJvYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm94XCIpO1xuICBcbiAgICBjb25zdCBwbGF5ZXJNb3ZlID0gKGJveCwgaW5kZXgpID0+IHtcblxuICAgICAgICBpZiAoZ2FtZW92ZXIpIHJldHVybjtcbiAgICBcbiAgICAgICAgY29uc3QgaSA9IE1hdGguZmxvb3IoaW5kZXggLyAzKTtcbiAgICAgICAgY29uc3QgaiA9IGluZGV4ICUgMztcbiAgICBcbiAgICAgICAgY29uc3QgY3AgPSBnYW1lcGxheS5nZXRDdXJyZW50UGxheWVyKCk7XG5cbiAgICAgICAgaWYgKGNwLmdldE1hcmtlcigpID09PSBcIlhcIikge1xuICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoXCJtYXJrZXItdGV4dC14XCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY3AuZ2V0TWFya2VyKCkgPT09IFwiT1wiKSB7XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcIm1hcmtlci10ZXh0LW9cIik7XG4gICAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGNvbnN0IHRzcCA9IGdhbWVwbGF5LmdldFRvc3dpdGNoUGxheWVyKCk7XG4gICAgXG4gICAgICAgIGlmIChnYW1lQm9hcmQudXBkYXRlQm9hcmQoaSwgaiwgY3AuZ2V0TWFya2VyKCkpKSB7XG4gICAgICAgICAgICBib3gudGV4dENvbnRlbnQgPSBjcC5nZXRNYXJrZXIoKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChnYW1lQm9hcmQuY2hlY2tXaW4oY3AuZ2V0TWFya2VyKCkpKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjcC5nZXROYW1lKCkgKyBcIiBpcyB0aGUgd2lubmVyXCIpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQudGV4dENvbnRlbnQgPSBjcC5nZXROYW1lKCkgKyBcIiB3aW5zIVwiO1xuICAgICAgICAgICAgICAgIGdhbWVvdmVyID0gdHJ1ZTtcblxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVCb2FyZC5jaGVja1RpZSgpKXtcblxuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQudGV4dENvbnRlbnQgPSBcIkl0J3MgYSB0aWUhXCI7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJdCdzIGEgdGllXCIpO1xuICAgICAgICAgICAgICAgIGdhbWVvdmVyID0gdHJ1ZTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgZ2FtZXBsYXkuc3dpdGNoUGxheWVyKCk7XG5cbiAgICAgICAgICAgIGlmIChnYW1lcGxheS5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TmFtZSgpLmluY2x1ZGVzKFwiQ29tcHV0ZXJcIikpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyTW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgbW92ZS4gVHJ5IGFnYWluLlwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gIFxuICAgIGNvbnN0IGNvbXB1dGVyTW92ZSA9ICgpID0+IHtcblxuICAgICAgICBjb25zdCBudWxsQm94ZXMgPSBmaW5kTnVsbEJveGVzKCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVsbEJveGVzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IFtpLCBqXSA9IG51bGxCb3hlc1tyYW5kb21JbmRleF07XG4gICAgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm94SW5kZXggPSBpICogMyArIGo7XG4gICAgICAgICAgICBwbGF5ZXJNb3ZlKGJveGVzW2JveEluZGV4XSwgYm94SW5kZXgpO1xuICAgICAgICB9LCA1MDApO1xuXG4gICAgfTtcbiAgXG4gICAgY29uc3QgZmluZE51bGxCb3hlcyA9ICgpID0+IHtcblxuICAgICAgICBjb25zdCBudWxsQm94ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVCb2FyZC5yZW5kZXJCb2FyZCgpW2ldW2pdID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxCb3hlcy5wdXNoKFtpLCBqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsQm94ZXM7XG4gICAgfTtcbiAgXG4gICAgY29uc3QgcGxheWdhbWUgPSAoKSA9PiB7XG4gICAgICAgIGJveGVzLmZvckVhY2goKGJveCkgPT4ge1xuICAgICAgICAgICAgYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBib3hDbGlja0hhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgYm94Q2xpY2tIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGJveCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKGJveGVzKS5pbmRleE9mKGJveCk7XG4gICAgICAgIHBsYXllck1vdmUoYm94LCBpbmRleCk7XG4gICAgfTtcbiAgXG4gICAgY29uc3QgcmVzZXRnYW1lID0gKCkgPT4ge1xuXG4gICAgICAgIGdhbWVCb2FyZC5yZXNldEJvYXJkKCk7XG4gICAgICAgIFxuICAgICAgICBib3hlcy5mb3JFYWNoKChib3gpID0+IHtcbiAgICAgICAgICAgIGJveC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LnJlbW92ZShcIm1hcmtlci10ZXh0LXhcIik7XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LnJlbW92ZShcIm1hcmtlci10ZXh0LW9cIik7XG4gICAgICAgICAgICBib3gucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJveENsaWNrSGFuZGxlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdhbWVwbGF5LnJlc2V0Q3VycmVudFBsYXllcigpO1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdFwiKTtcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvYXJkXCIpO1xuICAgICAgICBjb25zdCByZXNldGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVzZXRcIik7XG4gICAgICAgIGNvbnN0IHJlc3VsdFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RleHRcIik7XG4gICAgICAgIGNvbnN0IHBsYXlidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXktYnRuXCIpO1xuICAgICAgICBjb25zdCBzdGFydGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RhcnRnYW1lXCIpO1xuXG4gICAgICAgIGlmIChib2FyZCwgcmVzZXRidG4sIHJlc3VsdFRleHQsIHBsYXlidG4sIHN0YXJ0YnRuKSB7XG4gICAgICAgICAgICBib2FyZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICByZXNldGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICByZXN1bHRUZXh0LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgIHN0YXJ0YnRuLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBwbGF5YnRuLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3Rpb25CdG5zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZTFcIik7XG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZTJcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZ2FtZW92ZXIgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGxheWdhbWUsXG4gICAgICAgIHJlc2V0Z2FtZSxcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZWZsb3c7XG4iLCJpbXBvcnQgZ2FtZWZsb3cgZnJvbSAnLi9tb2R1bGVzL2dhbWVmbG93JztcblxuY29uc3QgcGxheWJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LWJ0bicpO1xuY29uc3Qgc3RhcnRidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhcnRnYW1lJyk7XG5jb25zdCByZXNldGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXNldCcpO1xuY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQnKTtcbmNvbnN0IHJlc3VsdFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGV4dCcpO1xuY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGlvbi1wYW5lJyk7XG5cbnBsYXlidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICBzZWxlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdncmlkJztcbiAgICAgICAgcGxheWJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn0pO1xuXG5zdGFydGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAoYm9hcmQgJiYgcmVzdWx0VGV4dCkge1xuICAgICAgICBnYW1lZmxvdy5wbGF5Z2FtZSgpO1xuICAgICAgICBwbGF5YnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHJlc2V0YnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBib2FyZC5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnO1xuICAgICAgICByZXN1bHRUZXh0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBzdGFydGJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzZWxlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59KTtcblxucmVzZXRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnYW1lZmxvdy5yZXNldGdhbWUpO1xuIl0sIm5hbWVzIjpbIm5hbWUiLCJtYXJrZXIiLCJnZXROYW1lIiwiZ2V0TWFya2VyIiwiY3VycmVudFBsYXllciIsInRvc3dpdGNoUGxheWVyIiwicGxheWVyMSIsInBsYXllcjIiLCJjb21wdXRlcjIiLCJwMWVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInAyZWxlbWVudCIsImRpc2FibGVkIiwiYzJlbGVtZW50IiwiZ2V0Q3VycmVudFBsYXllciIsImdldFRvc3dpdGNoUGxheWVyIiwic3dpdGNoUGxheWVyIiwidGVtcFBsYXllciIsInJlc2V0Q3VycmVudFBsYXllciIsImdhbWVCb2FyZCIsImJvYXJkIiwid2lubmluZ0NvbWJpbmF0aW9ucyIsInJlbmRlckJvYXJkIiwidXBkYXRlQm9hcmQiLCJpIiwiaiIsImNoZWNrV2luIiwiY29tYmluYXRpb24iLCJhIiwiYiIsImMiLCJjaGVja1RpZSIsInJlc2V0Qm9hcmQiLCJnYW1lZmxvdyIsImdhbWVvdmVyIiwicmVzdWx0VGV4dCIsInF1ZXJ5U2VsZWN0b3IiLCJib3hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwbGF5ZXJNb3ZlIiwiYm94IiwiaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJjcCIsInRleHRDb250ZW50IiwiY29uc29sZSIsImxvZyIsImluY2x1ZGVzIiwiY29tcHV0ZXJNb3ZlIiwibnVsbEJveGVzIiwiZmluZE51bGxCb3hlcyIsInJhbmRvbUluZGV4IiwicmFuZG9tIiwibGVuZ3RoIiwic2V0VGltZW91dCIsImJveEluZGV4IiwicHVzaCIsImJveENsaWNrSGFuZGxlciIsImV2ZW50IiwidGFyZ2V0IiwiQXJyYXkiLCJmcm9tIiwiaW5kZXhPZiIsInBsYXlnYW1lIiwiZm9yRWFjaCIsInJlc2V0Z2FtZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3Rpb25CdG5zIiwicmVzZXRidG4iLCJwbGF5YnRuIiwic3RhcnRidG4iLCJzdHlsZSIsImRpc3BsYXkiLCJidG4iLCJzZWxlY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9